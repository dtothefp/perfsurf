

<script>
/************ HELPER FUNCTIONS *********/

function createPhoto(responseObj){
  var imgElement = $('<img>').addClass('instagram-img').attr('src', responseObj.images.thumbnail.url);
  var aElement = $('<a>').attr({'href': responseObj.link, 'target': '_blank'}).append(imgElement);
  return $('<div>').addClass('instagram-placeholder').attr('id', responseObj.id).append(aElement);
}

function didLoadInstagram(event, response) {
    console.log(response);
    var requestObj = response;
    var self = this;
    $.each(response.data, function(key, photo){
      $(self).append(createPhoto(photo));
    });
}

var  locations = {
  "hawaii": [22.2062337, -159.5063759],
  "fiji": [-18.203262, 177.71759],
  "puerto-rico": [18.2953693, -67.2090722],
  "jeffreys-bay": [-34.0428347, 24.9260972]
}




// MAGIC SEAWEED API
var msLocationsById  = {
  "hawaii-ms": 3051,
  "fiji-ms": 3306,
  "puerto-plata-ms": 476,
  "jeffreys-bay-ms": 88
}

function getSpotData(id, callback){
    var httpRequest = new XMLHttpRequest;

    httpRequest.addEventListener('load', function(){
      callback(JSON.parse(this.responseText));
    });

    httpRequest.open('GET', 'http://magicseaweed.com/api/pGQx9a7IXwVYs3lIcQ8RV5E0y74Xmg9Y/forecast/?spot_id=' + id);
    httpRequest.send();
  }



function appendImg(response){
var body = document.querySelector('body');
var img = document.createElement('img');
img.src = response[0].charts.swell;
body.appendChild(img);
}
  

  function getSpotData(id, callback){
    var httpRequest = new XMLHttpRequest;

    $(httpRequest).on('load', function(){
      callback(JSON.parse(this.responseText));
    });

    httpRequest.open('GET', 'http://magicseaweed.com/api/pGQx9a7IXwVYs3lIcQ8RV5E0y74Xmg9Y/forecast/?spot_id=' + id);
    httpRequest.send();
  }

  function createDisplayElements(singleObj, attribute){
    var imgElement = $('<img>').attr('src', singleObj.charts);
    return $('<div>').addClass('ms-img-placeholder').append(imgElement);
  }

  function displaySwellImg(responseObj) {
    var swellDiv = $('<div>').attr('id', "swell-img");
    $('body').append(swellDiv);
    $.each(responseObj, function(key, singleObj){
      var imgElement = $('<img>').attr('src', singleObj.charts.swell);
      swellDiv.append($('<div>').addClass('ms-img-placeholder').append(imgElement));
    });
  }

  function displayWindImg(responseObj) {

  }

  function displayPressureImg(responseObj) {

  }

/************ ON LOAD *************/

$(function() {
  // INSTAGRAM API
  $.each(locations, function(locationName, coordinates) {
    $('body').append(
      $('<div>').attr('id', locationName).addClass('instagram').append(
        $('<h1>').text(locationName.toUpperCase())
      )
    );
    $('div#' + locationName).on('willLoadInstagram', function(event, options) {
      console.log(options);
    });
    $('div#' + locationName).on('didLoadInstagram', didLoadInstagram);
    $('div#' + locationName).instagram({
      clientId: 'af9178fc04b54d41b6e36f525a682b5c', 
      accessToken: '29114238.af9178f.eb625902c4124fc3bbce8fdd196abe0b',
      search: {
        lat: coordinates[0],
        lng: coordinates[1],
        count: 6,
        distance: 3000
      }
    });
  });


  // MAGIC SEAWEED API
  // getSpotData(1, displaySwellImg);



}); // end initial function
</script>